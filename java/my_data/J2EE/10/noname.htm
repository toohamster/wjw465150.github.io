<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>Java防止非法和重复表单提交的分析</TITLE>
<LINK media=screen href="tabber.css" type=text/css 
rel=stylesheet><LINK href="1.ico" 
rel="Shortcut Icon"><LINK media=all href="style.css" 
type=text/css rel=stylesheet><LINK media=print 
href="print.css" type=text/css rel=stylesheet><LINK title=RSS 
href="rss.aspx" type=application/rss+xml 
rel=alternate><LINK 
href="webimPopup.css" 
type=text/css rel=stylesheet>
</HEAD>

<BODY scroll=yes>

<FORM language=javascript id=Form1 name=Form1 action=2119298.aspx method=post>

<DIV id=main><!--StartFragment--><BR>
<DIV class=post>
<DIV class=postTitle>
<A href="http://blog.csdn.net/java2000_net/archive/2008/02/25/2119298.aspx"><IMG 
height=13 src="authorship.gif" width=15 
border=0>&nbsp;Java防止非法和重复表单提交的分析</A>&nbsp;&nbsp;
<IMG title=文章指数:0 alt=文章指数:0 src="star_0.gif" 
border=0>&nbsp;&nbsp;<IMG 
title="CSDN Blog推出文章指数概念，文章指数是对Blog文章综合评分后推算出的，综合评分项分别是该文章的点击量，回复次数，被网摘收录数量，文章长度和文章类型；满分100，每月更新一次。" 
alt="CSDN Blog推出文章指数概念，文章指数是对Blog文章综合评分后推算出的，综合评分项分别是该文章的点击量，回复次数，被网摘收录数量，文章长度和文章类型；满分100，每月更新一次。" 
src="ask.gif" border=0> </DIV>
<DIV class=postText>第一，对于不支持POST的，可以简单的使用如下代码<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG id=_40_52_Open_Image 
onclick="this.style.display='none'; document.getElementById('_40_52_Open_Text').style.display='none'; document.getElementById('_40_52_Closed_Image').style.display='inline'; document.getElementById('_40_52_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_40_52_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_40_52_Closed_Text').style.display='none'; document.getElementById('_40_52_Open_Image').style.display='inline'; document.getElementById('_40_52_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top><SPAN style="COLOR: rgb(0,0,255)">if</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">POST</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">.equals(request.getMethod()))&nbsp;</SPAN><SPAN 
id=_40_52_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_40_52_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;正常进行</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG id=_57_100_Open_Image 
onclick="this.style.display='none'; document.getElementById('_57_100_Open_Text').style.display='none'; document.getElementById('_57_100_Closed_Image').style.display='inline'; document.getElementById('_57_100_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_57_100_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_57_100_Closed_Text').style.display='none'; document.getElementById('_57_100_Open_Image').style.display='inline'; document.getElementById('_57_100_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">}</SPAN></SPAN><SPAN 
style="COLOR: rgb(0,0,255)">else</SPAN><SPAN id=_57_100_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_57_100_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;异常请求</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="InBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;out.print(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">异常访问</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">return</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">;<BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top>}</SPAN></SPAN></DIV></DIV><BR>如果是servlet,&nbsp;可以将doGet方法直接返回，不进行处理就行了<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG id=_76_88_Open_Image 
onclick="this.style.display='none'; document.getElementById('_76_88_Open_Text').style.display='none'; document.getElementById('_76_88_Closed_Image').style.display='inline'; document.getElementById('_76_88_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_76_88_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_76_88_Closed_Text').style.display='none'; document.getElementById('_76_88_Open_Image').style.display='inline'; document.getElementById('_76_88_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top><SPAN style="COLOR: rgb(0,0,255)">public</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">void</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;doGet(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response)&nbsp;</SPAN><SPAN 
id=_76_88_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_76_88_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">return</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">;<BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top>}</SPAN></SPAN><SPAN style="COLOR: rgb(0,0,0)"><BR><IMG 
id=_167_181_Open_Image 
onclick="this.style.display='none'; document.getElementById('_167_181_Open_Text').style.display='none'; document.getElementById('_167_181_Closed_Image').style.display='inline'; document.getElementById('_167_181_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_167_181_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_167_181_Closed_Text').style.display='none'; document.getElementById('_167_181_Open_Image').style.display='inline'; document.getElementById('_167_181_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,255)">public</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">void</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;doPost(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response)&nbsp;</SPAN><SPAN 
id=_167_181_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_167_181_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;正常进行操作</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top></SPAN><SPAN 
style="COLOR: rgb(0,0,0)">}</SPAN></SPAN></DIV></DIV><BR>还可以采用特定的标志来区分，比如 <BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG alt="" 
src="None.gif" 
align=top><SPAN style="COLOR: rgb(0,0,255)">&lt;</SPAN><SPAN 
style="COLOR: rgb(128,0,0)">form</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">&gt;&lt;</SPAN><SPAN 
style="COLOR: rgb(128,0,0)">input&nbsp;</SPAN><SPAN 
style="COLOR: rgb(255,0,0)">type</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">="hidden"</SPAN><SPAN 
style="COLOR: rgb(255,0,0)">&nbsp;name</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">="action"</SPAN><SPAN 
style="COLOR: rgb(255,0,0)">&nbsp;value</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">="insert"</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">/&gt;&lt;/</SPAN><SPAN 
style="COLOR: rgb(128,0,0)">form</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN></DIV></DIV><BR>程序里这样判断<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG id=_93_105_Open_Image 
onclick="this.style.display='none'; document.getElementById('_93_105_Open_Text').style.display='none'; document.getElementById('_93_105_Closed_Image').style.display='inline'; document.getElementById('_93_105_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_93_105_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_93_105_Closed_Text').style.display='none'; document.getElementById('_93_105_Open_Image').style.display='inline'; document.getElementById('_93_105_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top><SPAN style="COLOR: rgb(0,0,255)">if</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">POST</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">.equals(request.getMethod())&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&amp;&amp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">insert</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">.equals(request.getParameter(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">action</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">))))&nbsp;</SPAN><SPAN id=_93_105_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_93_105_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;正常进行</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG id=_110_153_Open_Image 
onclick="this.style.display='none'; document.getElementById('_110_153_Open_Text').style.display='none'; document.getElementById('_110_153_Closed_Image').style.display='inline'; document.getElementById('_110_153_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_110_153_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_110_153_Closed_Text').style.display='none'; document.getElementById('_110_153_Open_Image').style.display='inline'; document.getElementById('_110_153_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">}</SPAN></SPAN><SPAN 
style="COLOR: rgb(0,0,255)">else</SPAN><SPAN id=_110_153_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_110_153_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;异常请求</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="InBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;out.print(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">异常访问</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">return</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">;<BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top>}</SPAN></SPAN></DIV></DIV><BR>第二，判断提交的来源referer,代码如下<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG id=_40_212_Open_Image 
onclick="this.style.display='none'; document.getElementById('_40_212_Open_Text').style.display='none'; document.getElementById('_40_212_Closed_Image').style.display='inline'; document.getElementById('_40_212_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_40_212_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_40_212_Closed_Text').style.display='none'; document.getElementById('_40_212_Open_Image').style.display='inline'; document.getElementById('_40_212_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top><SPAN style="COLOR: rgb(0,0,255)">if</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">POST</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">.equals(request.getMethod()))&nbsp;</SPAN><SPAN 
id=_40_212_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_40_212_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;String&nbsp;referer&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,0)">=</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;request.getHeader(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">referer</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
id=_172_200_Open_Image 
onclick="this.style.display='none'; document.getElementById('_172_200_Open_Text').style.display='none'; document.getElementById('_172_200_Closed_Image').style.display='inline'; document.getElementById('_172_200_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedSubBlockStart.gif" 
align=top><IMG id=_172_200_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_172_200_Closed_Text').style.display='none'; document.getElementById('_172_200_Open_Image').style.display='inline'; document.getElementById('_172_200_Open_Text').style.display='inline';" 
alt="" 
src="ContractedSubBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">if</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(referer&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">==</SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">null</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,0)">||</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,0)">!</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">referer.startsWith(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">http://</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">+</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">request.getServerName()))&nbsp;</SPAN><SPAN 
id=_172_200_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_172_200_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;非法来源</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="InBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">return</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">;<BR><IMG alt="" 
src="ExpandedSubBlockEnd.gif" 
align=top>&nbsp;&nbsp;}</SPAN></SPAN><SPAN style="COLOR: rgb(0,0,0)"><BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;正常进行</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG id=_217_260_Open_Image 
onclick="this.style.display='none'; document.getElementById('_217_260_Open_Text').style.display='none'; document.getElementById('_217_260_Closed_Image').style.display='inline'; document.getElementById('_217_260_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_217_260_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_217_260_Closed_Text').style.display='none'; document.getElementById('_217_260_Open_Image').style.display='inline'; document.getElementById('_217_260_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">}</SPAN></SPAN><SPAN 
style="COLOR: rgb(0,0,255)">else</SPAN><SPAN id=_217_260_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_217_260_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;异常请求</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="InBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;out.print(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">异常访问</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">return</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">;<BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top>}</SPAN></SPAN></DIV></DIV><BR>第三&nbsp;防止重复提交的hashCode <BR>在表单显示页面<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG alt="" 
src="None.gif" 
align=top><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">生成一个formhash,算法可以自己定，不随便重复就可以了</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="None.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;String&nbsp;formhash&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;MD5.encode(Long.toString(</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">new</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;Date().getTime()));<BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">读取当前session里面的hashCode集合，此处使用了Set，方便判断。</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="None.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;Set</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&lt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">String</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;formhashSession&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(Set</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&lt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">String</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">)&nbsp;session.getAttribute(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhashSession</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
id=_266_315_Open_Image 
onclick="this.style.display='none'; document.getElementById('_266_315_Open_Text').style.display='none'; document.getElementById('_266_315_Closed_Image').style.display='inline'; document.getElementById('_266_315_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_266_315_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_266_315_Closed_Text').style.display='none'; document.getElementById('_266_315_Open_Image').style.display='inline'; document.getElementById('_266_315_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">if</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(formhashSession&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">==</SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">null</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">)&nbsp;</SPAN><SPAN id=_266_315_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_266_315_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;formhashSession&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">new</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;HashSet</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&lt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">String</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&gt;</SPAN><SPAN style="COLOR: rgb(0,0,0)">();<BR><IMG 
alt="" 
src="ExpandedBlockEnd.gif" 
align=top>&nbsp;&nbsp;}</SPAN></SPAN><SPAN style="COLOR: rgb(0,0,0)"><BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;检测重复问题</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG id=_374_442_Open_Image 
onclick="this.style.display='none'; document.getElementById('_374_442_Open_Text').style.display='none'; document.getElementById('_374_442_Closed_Image').style.display='inline'; document.getElementById('_374_442_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_374_442_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_374_442_Closed_Text').style.display='none'; document.getElementById('_374_442_Open_Image').style.display='inline'; document.getElementById('_374_442_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">while</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(formhashSession.contains(formhash))&nbsp;</SPAN><SPAN 
id=_374_442_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_374_442_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;formhash&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,0)">=</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;MD5.encode(Long.toString(</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">new</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;Date().getTime()));<BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top>&nbsp;&nbsp;}</SPAN></SPAN><SPAN style="COLOR: rgb(0,0,0)"><BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;保存到session里面</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="None.gif" 
align=top></SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;formhashSession.add(formhash);<BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;保存</SPAN><SPAN style="COLOR: rgb(0,128,0)"><BR><IMG 
alt="" 
src="None.gif" 
align=top></SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;session.setAttribute(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhashSession</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">,&nbsp;formhashSession);</SPAN></DIV></DIV><BR>表单里面增加如下字段<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG alt="" 
src="None.gif" 
align=top><SPAN style="COLOR: rgb(0,0,0)">&lt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">input&nbsp;type</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">hidden</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;name</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhash</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;id</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhash</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;value</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&lt;%=formhash%&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">/&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN></DIV></DIV><BR>在表单提交页面进行如下处理<BR>
<DIV 
style="BORDER-RIGHT: windowtext 0.5pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 0.5pt solid; PADDING-LEFT: 5.4pt; BACKGROUND: rgb(230,230,230) 0% 50%; PADDING-BOTTOM: 4px; BORDER-LEFT: windowtext 0.5pt solid; WIDTH: 95%; PADDING-TOP: 4px; BORDER-BOTTOM: windowtext 0.5pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">
<DIV><IMG alt="" 
src="None.gif" 
align=top><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;拿到表单的formhash</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="None.gif" 
align=top></SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;formhash&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;upload.getParameter(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhash</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;拿到session里面的集合</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="None.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;Set</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&lt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">String</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;formhashSession&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">=</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(Set</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&lt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">String</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&gt;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">)&nbsp;session.getAttribute(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhashSession</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;如果没有，则是重复提交，或者非法提交</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG id=_285_336_Open_Image 
onclick="this.style.display='none'; document.getElementById('_285_336_Open_Text').style.display='none'; document.getElementById('_285_336_Closed_Image').style.display='inline'; document.getElementById('_285_336_Closed_Text').style.display='inline';" 
alt="" 
src="ExpandedBlockStart.gif" 
align=top><IMG id=_285_336_Closed_Image style="DISPLAY: none" 
onclick="this.style.display='none'; document.getElementById('_285_336_Closed_Text').style.display='none'; document.getElementById('_285_336_Open_Image').style.display='inline'; document.getElementById('_285_336_Open_Text').style.display='inline';" 
alt="" 
src="ContractedBlock.gif" 
align=top></SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">if</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;(formhashSession&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">==</SPAN><SPAN style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN 
style="COLOR: rgb(0,0,255)">null</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,0)">||</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,0)">!</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhashSession.contains(formhash))&nbsp;</SPAN><SPAN 
id=_285_336_Closed_Text 
style="BORDER-RIGHT: rgb(128,128,128) 1px solid; BORDER-TOP: rgb(128,128,128) 1px solid; DISPLAY: none; BORDER-LEFT: rgb(128,128,128) 1px solid; BORDER-BOTTOM: rgb(128,128,128) 1px solid; BACKGROUND-COLOR: rgb(255,255,255)">...</SPAN><SPAN 
id=_285_336_Open_Text><SPAN style="COLOR: rgb(0,0,0)">{<BR><IMG alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.println(</SPAN><SPAN style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">请不要重复提交！</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN style="COLOR: rgb(0,0,0)">);<BR><IMG 
alt="" 
src="InBlock.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,0,255)">return</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">;<BR><IMG alt="" 
src="ExpandedBlockEnd.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></SPAN><SPAN style="COLOR: rgb(0,0,0)"><BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;下面进行其它的操作<BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;<BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;最后,如果操作成功,从session里面把这个formhash&nbsp;删掉！<BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN style="COLOR: rgb(0,128,0)">//</SPAN><SPAN 
style="COLOR: rgb(0,128,0)">&nbsp;以免用户少填写了某个字段，造成表单无法再次提交</SPAN><SPAN 
style="COLOR: rgb(0,128,0)"><BR><IMG alt="" 
src="None.gif" 
align=top></SPAN><SPAN 
style="COLOR: rgb(0,0,0)">&nbsp;&nbsp;&nbsp;&nbsp;formhashSession.remove(formhash);<BR><IMG alt="" 
src="None.gif" 
align=top>&nbsp;&nbsp;&nbsp;&nbsp;session.setAttribute(</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">formhashSession</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">"</SPAN><SPAN 
style="COLOR: rgb(0,0,0)">,&nbsp;formhashSession);</SPAN></DIV></DIV><BR>以上内容为本人原创内容，如要转载，请保留完整信息。并注明来源为http://blog.csdn.net/或http://www.Java2000.net,<BR><BR>
<P id=TBPingURL>Trackback: 
http://tb.blog.csdn.net/TrackBack.aspx?PostId=2119298</P></DIV></DIV><!--EndFragment--></DIV>
</FORM>
</BODY>
</HTML>