<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
<TITLE>实例教程：巧用Java 实现个性MSN聊天功能 （3）</TITLE>
<LINK 
href="index_css_new.css" 

<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
</HEAD>

<BODY>
<DIV style="WIDTH: 986px">
  <DIV id=aaaa 
style="MARGIN-TOP: 5px; FLOAT: left; MARGIN-LEFT: 20px; WIDTH: 639px">
    <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
      <TBODY>
        <TR>
          <TD align=middle 
background=wz_left_2.gif><!--StartFragment-->
            <TABLE class=titel style="BORDER-TOP: #ffffff 17px solid" cellSpacing=0 
cellPadding=0 width=560 border=0>
              <TBODY>
                <TR>
                  <TD align=middle><H1 class=titel>实例教程：巧用Java 实现个性MSN聊天功能 （3） </H1></TD>
                </TR>
              </TBODY>
            </TABLE>
            <TABLE style="MARGIN: 2px 0px 20px" cellSpacing=0 cellPadding=0 width=560 
border=0>
              <TBODY>
                <TR>
                  <TD bgColor=#b1bcc0 height=1></TD>
                </TR>
              </TBODY>
            </TABLE>
            <TABLE style="MARGIN-BOTTOM: 20px" cellSpacing=0 cellPadding=0 width=560 
border=0>
              <TBODY>
                <TR>
                  <TD align=middle><SPAN class=content01></SPAN><SPAN class=b>发布时间：2008.09.18 
                    10:50</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=b> 来源：赛迪网</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
class=b>作者：DuDu</SPAN></TD>
                </TR>
              </TBODY>
            </TABLE>
            <TABLE class=p11 cellSpacing=0 cellPadding=0 width=560 border=0>
              <TBODY>
                <TR>
                  <TD style="WORD-WRAP: break-word" align=left><P class=a14c style="TEXT-INDENT: 2em">
                    <SPAN class=a14c id=zoom>
                    <P style="TEXT-INDENT: 2em">
                    <P 
style="TEXT-INDENT: 2em">我们自行扩展MsnAdapter的类必须告诉MSNMessenger实例知道，这也就是我们前面代码中的msn.addMsnListener(new 
                      MSNAdapter(msn)); 
                      自行扩展MsnAdapter的类是用来处理被动消息的，例如有人给我发消息等。当我们要发送消息给别人的时候就需要用到MSNMessenger的实例，这也就是我们为什么要把MSNMessenger的实例传递给MSNAdapter的原因，因为当我们接收到任何消息时要给发送人回复一条相同的信息。
                    <P 
style="TEXT-INDENT: 2em">到此我们前面提出的简单功能已经完成了，读者可以在自己的机器上进行测试，运行时需要用到msnm-lib库，也就是msnm.jar文件。下图是运行时候的一个截图：
                    <P style="TEXT-INDENT: 2em">
                      <CENTER>
                        <IMG 
style="BORDER-RIGHT: black 1px solid; BORDER-TOP: black 1px solid; BORDER-LEFT: black 1px solid; BORDER-BOTTOM: black 1px solid" 
src="1626671.jpg">
                      </CENTER>
                    <P style="TEXT-INDENT: 2em"><B>关于多人聊天 </B>
                    <P 
style="TEXT-INDENT: 2em">MSN有另外一个不错的功能就是多人同时聊天，msnm-lib对这个功能支持也非常好。在MsnAdapter中定义的方法instantMessageReceived的第一个参数类型为SwitchboardSession。当接收到消息时，我们可以从这个参数中获取多人聊天的一个会话标识，同时可以通过getMsnFriends来读取参与当前聊天的所有好友。当你要主动发送消息的时候你就必须从SwitchboardSession中读取所有的好友并给他们一一发送信息。
                    <P style="TEXT-INDENT: 2em"><B>关于文件传输 </B>
                    <P 
style="TEXT-INDENT: 2em">可能这是我发现的关于msnm-lib的唯一不足，或者说还不够完善的部分。经过测试发现使用微软的MSN程序可以正常传输文件的两台机器用jMSN却无法传输，错误信息都是说连接超时，这两台机器不在同一个子网。相信msnm-lib对这个功能并没有进行处理。由于并没有两台直接连接Internet的机器，因此关于jMSN的文件传输一直都没有办法来做一个试验，希望新版本的msnm-lib能解决好这个问题。
                    <P style="TEXT-INDENT: 2em"><B>总结 </B>
                    <P 
style="TEXT-INDENT: 2em">尽管在文件传输上有点瑕疵，但是msnm-lib所提供的功能已经非常棒了，至少在我第一眼看到它的时候心里说：没错，这就是我想要的东西！本文旨在介绍如何使用msnm-lib来完成一个简单的MSN客户端，至于如果让它在实际的应用系统中发挥作用，读者们肯定有比我更多的想法，比如说是否可以利用它来丰富客服的渠道等等，当然这些都超过我们的题目。 </P>
                    </SPAN></TD>
                </TR>
              </TBODY>
            </TABLE>
            <!--EndFragment--></TD>
        </TR>
      </TBODY>
    </TABLE>
  </DIV>
</DIV>
</BODY>
</HTML>