<html>
<title>用javap查看编译版本</title>
<body>
<!--StartFragment-->
<h2> <a id="viewpost1_TitleUrl" href="http://www.blogjava.net/galaxyp/archive/2012/05/29/379436.html">用javap查看编译版本</a> </h2>
<div class="postbody"> <span style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px; text-align: left; background-color: #f5f5f5; ">我们可以用javap命令查看class文件的编译版本。</span><wbr style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">比如对Worke.class使用javap命令：javap -verbose Worker</div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">我将看到Worker的反编译结果。其中前几行如下：</div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">
    <div>Compiled from "Worker.java"</div>
    <div>public class com.teleca.robin.Worker extends java.lang.Thread</div>
    <div>&nbsp;&nbsp;SourceFile: "Worker.java"</div>
    <div>&nbsp;&nbsp;minor version: 0</div>
    <div>&nbsp;&nbsp;major version: 49</div>
    <div>&nbsp;&nbsp;Constant pool:</div>
  </div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">上面的<span style="color: #993300; ">minor version: 0和</span><span style="color: #993300; ">major version: 49</span>就是编译Worke.class时使用的jdk编译版本号。</div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">但是它并不是我们所熟悉的jdk版本号（比如jdk1.5）。</div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; ">不过我们可以把<span style="line-height: 21px; font-family: verdana, sans-serif; ">从 JDK 1.1 到 JDK 1.7 编译器编译出的 class 的默认 minor.major version 汇总下就知道对应关系了。</span></div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; "><span style="line-height: 21px; font-family: verdana, sans-serif; ">
    <table style="line-height: 25px; border-collapse: collapse; " width="700" border="1" bordercolor="#000000" align="center">
      <tbody>
        <tr>
          <td width="20%"><strong>JDK 编译器版本</strong></td>
          <td width="30%"><strong>target 参数</strong></td>
          <td width="25%"><strong>十六进制 minor.major</strong></td>
          <td width="25%"><strong>十进制 minor.major</strong></td>
        </tr>
        <tr>
          <td>jdk1.1.8</td>
          <td>不能带 target 参数</td>
          <td>00 03 00 2D</td>
          <td>45.3</td>
        </tr>
        <tr>
          <td>jdk1.2.2</td>
          <td>不带(默认为 -target 1.1)</td>
          <td>00 03 00 2D</td>
          <td>45.3</td>
        </tr>
        <tr>
          <td>jdk1.2.2</td>
          <td>-target 1.2</td>
          <td>00 00&nbsp;&nbsp; 00 2E</td>
          <td>46.0</td>
        </tr>
        <tr>
          <td>jdk1.3.1_19</td>
          <td>不带(默认为 -target 1.1)</td>
          <td>00 03 00 2D</td>
          <td>45.3</td>
        </tr>
        <tr>
          <td>jdk1.3.1_19</td>
          <td>-target 1.3</td>
          <td>00 00&nbsp;&nbsp; 00 2F</td>
          <td>47.0</td>
        </tr>
        <tr>
          <td>j2sdk1.4.2_10</td>
          <td>不带(默认为 -target 1.2)</td>
          <td>00 00&nbsp;&nbsp; 00 2E</td>
          <td>46.0</td>
        </tr>
        <tr>
          <td>j2sdk1.4.2_10</td>
          <td>-target 1.4</td>
          <td>00 00&nbsp;&nbsp; 00 30</td>
          <td>48.0</td>
        </tr>
        <tr>
          <td>jdk1.5.0_11</td>
          <td>不带(默认为 -target 1.5)</td>
          <td>00 00&nbsp;&nbsp; 00 31</td>
          <td>49.0</td>
        </tr>
        <tr>
          <td>jdk1.5.0_11</td>
          <td>-target 1.4 -source 1.4</td>
          <td>00 00&nbsp;&nbsp; 00 30</td>
          <td>48.0</td>
        </tr>
        <tr>
          <td>jdk1.6.0_01</td>
          <td>不带(默认为 -target 1.6)</td>
          <td>00 00&nbsp;&nbsp; 00 32</td>
          <td>50.0</td>
        </tr>
        <tr>
          <td>jdk1.6.0_01</td>
          <td>-target 1.5</td>
          <td>00 00&nbsp;&nbsp; 00 31</td>
          <td>49.0</td>
        </tr>
        <tr>
          <td>jdk1.6.0_01</td>
          <td>-target 1.4 -source 1.4</td>
          <td>00 00&nbsp;&nbsp; 00 30</td>
          <td>48.0</td>
        </tr>
        <tr>
          <td>jdk1.7.0</td>
          <td>不带(默认为 -target 1.6)</td>
          <td>00 00&nbsp;&nbsp; 00 32</td>
          <td>50.0</td>
        </tr>
        <tr>
          <td>jdk1.7.0</td>
          <td>-target 1.7</td>
          <td>00 00&nbsp;&nbsp; 00 33</td>
          <td>51.0</td>
        </tr>
        <tr>
          <td>jdk1.7.0</td>
          <td>-target 1.4 -source 1.4</td>
          <td>00 00&nbsp;&nbsp; 00 30</td>
          <td>48.0</td>
        </tr>
        <tr>
          <td>Apache Harmony 5.0M3</td>
          <td>不带(默认为 -target 1.2)</td>
          <td>00 00&nbsp;&nbsp; 00 2E</td>
          <td>46.0</td>
        </tr>
        <tr>
          <td>Apache Harmony 5.0M3</td>
          <td>-target 1.4</td>
          <td>00 00&nbsp;&nbsp; 00 30</td>
          <td>48.0<br></td>
        </tr>
      </tbody>
    </table>
  <strong style="line-height: 25px; ">注1：</strong>javac 有个 -target 参数，编译时可以通过</span><span style="line-height: 21px; font-family: verdana, sans-serif; "><span style="line-height: 22px; ">target</span></span><span style="line-height: 21px; font-family: verdana, sans-serif; ">参数来设置编译时所使用的jdk版本。比如如果目标 JVM 是 1.3 的话，编译选项就可以用 -target 1.3 -source 1.3 了。</span></div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; "><span style="line-height: 21px; font-family: verdana, sans-serif; ">相应的如果使用 ant ，<span style="font-family: Arial, Helvetica, sans-serif; "><span style="font-family: verdana, sans-serif; ">编译时可以通过</span><span style="font-family: verdana, sans-serif; "><span style="line-height: 22px; ">target</span></span><span style="font-family: verdana, sans-serif; ">参数来设置编译时所使用的jdk版本。比如：</span></span><br>
  &lt;javac target="1.4" source="1.4" ............................/&gt;</span></div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; "><span style="line-height: 21px; font-family: verdana, sans-serif; "><strong style="line-height: 25px; ">注2</strong>：javac中</span><span style="line-height: 21px; font-family: verdana, sans-serif; ">source和</span><span style="line-height: 21px; font-family: verdana, sans-serif; ">target 的意义</span></div>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; "><span style="line-height: 21px; font-family: verdana, sans-serif; ">-source &lt;版本&gt;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;提供与指定版本的源兼容性</span></div>
  <span style="text-align: left; background-color: #f5f5f5; font-family: verdana, sans-serif; ">-target &lt;版本&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 生成特定 VM 版本的类文件</span>
  <div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; text-align: left; background-color: #f5f5f5; "><span style="line-height: 21px; font-family: verdana, sans-serif; ">source才是真正的指明代码的兼容性，</span><span style="line-height: 21px; font-family: verdana, sans-serif; ">target则是指定了生成class的格式的版本号，即</span><span style="line-height: 21px; font-family: verdana, sans-serif; ">生成特定 VM 版本的类文件。</span></div>
</div>
<!--EndFragment-->
</body>
</htm>
