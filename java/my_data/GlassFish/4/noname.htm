<!-- saved from url=http://blog.csdn.net/crackcell/archive/2007/10/07/1814528.aspx -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>在Glassfish中设置虚拟主机</title>

<LINK media=screen href="tabber.css" type=text/css 
rel=stylesheet><LINK href="1.ico" 
rel="Shortcut Icon"><LINK media=all href="style.css" 
type=text/css rel=stylesheet><LINK media=print 
href="print.css" type=text/css rel=stylesheet><LINK title=RSS 
href="rss.aspx" type=application/rss+xml 
rel=alternate><LINK 
href="webimPopup.css" 
type=text/css rel=stylesheet>

</HEAD>

<BODY scroll=yes>

<DIV id=main>

<DIV class=post>

<DIV class=postText><!--StartFragment--><H2><FONT size=6>在Glassfish中设置虚拟主机 </FONT></H2><BR>&nbsp;&nbsp;&nbsp; 
简单说一下glassfish（玻璃鱼），它是sun支持的开源的J2EE应用服务器，其实和Sun Java System Application 
Server同出一源，是Sun Java System Application 
Server的开源版本，sun将很多的商业服务器特征加到了glassfish中，使得glassfish非常的强大，支持集群。
<P>&nbsp;&nbsp;&nbsp; 对于一般的小型网站应用，如果能够让多个网站同时共用一个IP地址和同一个端口（就是建立虚拟主机）还是很有实用价值的，以前我是在tomcat中实现 
的，配置方法网友们可以google一下，很多的，下面我主要说一下在glassfish下如何实现，因为关于glassfish的中文资料网上不是很 
多，尤其关于虚拟主机功能，glassfish的官方英文文档也说的很模糊（也可能是本人理解不够）。</P>
<P>假如您的应用已经部署到glassfish中，并且能够通过类似http://localhost:8080/appname访问</P>
<P>如果图片您看不清楚，可另存到您的电脑上再看。</P>1、打开控制台：http://localhost:4848，如下图:<BR>
<P>输入用户名:admin&nbsp;&nbsp;&nbsp;&nbsp; 密码：adminadmin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入控制台</P>
<P>2、展开Configuration--&gt;HTTP Service--&gt;HTTP Listeners、Virtual 
Servers菜单如下:</P>
<P>3、点击Virtual Servers</P>
<P>3、点击右边的New按钮出现如下界面</P>
<P>4、假如你有两个域名：www.aaa.com和www.bbb.com，依次填写内容如下(http listeners暂时不填):</P>
<P>点OK保存如下:</P>
<P>5、同样再建立bbb对应的virtual server</P>
<P>点OK保存</P>
<P>6、现在点HTTP Listeners</P>
<P>点击NEW新建</P>
<P>OK保存</P>
<P>点击Vistual Servers--》vs-1，你会发现http listeners一栏已被自动填成http-listener-3</P>
<P>再点击Vistual Servers--》vs-2，手动填写http listeners一栏为http-listener-3，点save保存</P>
<P>使用命令asadmin stop-domain 
domain1停止glassfish，用记事本打开glassfish\domains\domain1\config\domain.xml文件，翻到最后如图</P>
<P>将两个server(红线圈部分)分别改成vs-1和vs-2，不知道为什么此处server应该由glassfish自动填写上vs-1和vs-2 
的，是不是glassfish的一个bug呢?</P>
<P>保存修改，用asadmin start-domain domain1启动glassfish</P>
<P>用http://www.aaa.com:8383和http://www.bbb.com:8383就可以访问了</P>
<P>在本机测试需要将www.aaa.com和www.bbb.com和本机地址映射一下，修改WINNT\system32\drivers\etc\hosts文件</P>
<P>另外如果你已经将你的服务端口8383映射到公网的80端口，就可以直接通过http://www.aaa.com和<A 
href="http://www.bbb.com">http://www.bbb.com</A>地址访问了</P><!--EndFragment--></DIV>
</DIV>
</DIV>
<P>&nbsp;</P>
<P>&nbsp;</P>
</BODY>
</HTML>