<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Linux文件系统损坏后的修复技巧详细介绍</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
</head>
<body>
<!--StartFragment-->
<span class="Apple-style-span" style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span class="Apple-style-span" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; ">Linux不正常关机，有时候再次启动时会报文件系统损坏，如何修复文件？<br>首先会让你输入root用户的密码。<br>1）出错的时候如果告诉你是哪一块硬盘的分区有问题，比如是/dev/hda3<br>接着用如下的命令去对付它呀：<br>#fsck -y /dev/hda3<br>结束后，reboot。这样就OK了！<br>2）如果你不知道时哪个地方出了问题。（常用此种方法）<br>可以直接<br>#fsck<br>在随后的多个确认对话框中输入:y<br>结束后，reboot。就ok了。<br>说明：　对Linux系统中常用文件系统的检查是通过fsck工具来完成的。<br>功能说明：检查文件系统并尝试修复错误。<br>语　　法：fsck [-aANPrRsTV][-t ][文件系统...]<br>补充说明：当文件系统发生错误四化，可用fsck指令尝试加以修复。<br>参　　数：<br>-a 自动修复文件系统，不询问任何问题。<br>-A 依照/etc/fstab配置文件的内容，检查文件内所列的全部文件系统。<br>-N 不执行指令，仅列出实际执行会进行的动作。<br>-P 当搭配"-A"参数使用时，则会同时检查所有的文件系统。<br>-r 采用互动模式，在执行修复时询问问题，让用户得以确认并决定处理方式。<br>-R 当搭配"-A"参数使用时，则会略过/目录的文件系统不予检查。<br>-s 依序执行检查作业，而非同时执行。<br>-t＜文件系统类型＞指定要检查的文件系统类型。<br>-T 执行fsck指令时，不显示标题信息。<br>-V 显示指令执行过程。<br>用fsck检查文件系统完整性文件系统很复杂，因此易于发生错误。可以用fsck<br>命令检查文件系统是否正确和有效。它可以根据指令修复找到的小错误，并将未修复错误报告用户。幸运的是，文件系统的代码非常有效，所以根本极少出现问题，<br>并且问题通常原因是电源失败、硬件失败、或操作错误，例如没有正常关闭系统。 大多数系统设置为启动时自动运行fsck<br>，因此任何错误将在系统使用前被检测到(并根据希望修正)。使用有错误的文件系统可能使问题变得更坏：如果数据结构有问题，使用这个文件系统可能使之更<br>糟，导致更多的数据丢失。当然，在大的文件系统上运行fsck<br>会花一定的时间，如果系统正常关闭，几乎从不发生错误，因此有一些方法可以不进行检查。如果文件/etc/fastboot<br>存在，就不检查。另外，如果ext2文件系统在超级快中有一个特定的标记告知该文件系统在上次mount后没有正常unmount.<br>如果标记指出unmount正常完成(假设正常unmount指出没问题)，e2fsck (fsck 的ext2文件系统版)<br>就不检查系统。/etc/fastboot 是否影响系统依赖于你的启动手稿，但ext2标记则在你使用e2fsck<br>时发生作用--基于一个e2fsck 选项(参阅e2fsck 手册页) 自动检查只对启动时自动mount的文件系统发生作用。使用fsck<br>手工检查其他文件系统，比如软盘。 如果fsck<br>发现为修复的问题，你需要深入了解文件系统的一般工作原理和有问题的文件系统的细节，或好的备份。最后一个办法容易(虽然冗长)安排，如果你自己不知道，<br>有时可以通过朋友、linux新闻组、电子邮件列表或其他支持源安排。我很想告诉你更多，但我对这的学习和实践也并不多。<br>theodore t'so的debugfs 程序应该有用。 fsck 只能运行于未mount的文件系统，不要用于已mount的文件系统(除了启动时的只读根文件系统)。这是因为它存取原始磁盘，在操作系统不知道的情况下修改文件系统。</span></span>
<!--EndFragment-->
</body>
</htm</html>