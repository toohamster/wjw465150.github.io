<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>Linux禁止用户登录 - 亦歆随笔</TITLE><LINK rel=stylesheet type=text/css 
href="osc-myspace.css_v=20100628" media=screen><LINK rel=stylesheet 
type=text/css href="thickbox.css" media=screen>
<LINK title=亦歆随笔最新博客 rel=alternate type=application/rss+xml 
href="rss">
<STYLE>
 body,table,input,textarea,select {font-size:10pt;font-family:Verdana,sans-serif;}
 </STYLE>
</HEAD>

<BODY>

<DIV id=OSC_content class=CenterDiv>

<DIV class=screen_content>

<TABLE style="TABLE-LAYOUT: fixed" border=0 width="100%">

<TBODY>

<TR>

<TD class=Blog>

<DIV class="content TextContent"><!--StartFragment-->
<P>我们在做系统维护的时候，希望个别用户或者所有用户不能登录系统，保证系统在维护期间正常运行。这个时候我们就要<STRONG 
style="BACKGROUND-COLOR: #ffff66; COLOR: black">禁止</STRONG><STRONG 
style="BACKGROUND-COLOR: #99ff99; COLOR: black">用户登录</STRONG>。</P>
<P><BR><STRONG 
style="BACKGROUND-COLOR: #ffff66; COLOR: black">1、禁止</STRONG><STRONG>个别</STRONG><STRONG 
style="BACKGROUND-COLOR: #99ff99; COLOR: black">用户登录</STRONG><STRONG>。比如</STRONG><STRONG 
style="BACKGROUND-COLOR: #ffff66; COLOR: black">禁止</STRONG><STRONG>lynn</STRONG><STRONG 
style="BACKGROUND-COLOR: #99ff99; COLOR: black">用户登录</STRONG><STRONG>。</STRONG></P>
<P>passwd -l lynn<BR>这就话的意思是锁定lynn用户，这样该用户就不能登录了。<BR>passwd -u 
lynn<BR>对锁定的用户lynn进行解锁，用户可登录了。</P>
<P><BR><STRONG 
style="BACKGROUND-COLOR: #99ff99; COLOR: black">2、我们通过修改/etc/passwd文件中用户登录</STRONG><STRONG>的shell</STRONG></P>
<P><BR>vi 
/etc/passwd<BR>root:x:0:0:root:/root:/bin/bash<BR>bin:x:1:1:bin:/bin:/sbin/nologin<BR>daemon:x:2:2:daemon:/sbin:/sbin/nologin<BR>adm:x:3:4:adm:/var/adm:/sbin/nologin<BR>lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin<BR>sync:x:5:0:sync:/sbin:/bin/sync<BR>shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown<BR>halt:x:7:0:halt:/sbin:/sbin/halt<BR>mail:x:8:12:mail:/var/spool/mail:/sbin/nologin<BR>uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin<BR>operator:x:11:0:operator:/root:/sbin/nologin<BR>games:x:12:100:games:/usr/games:/sbin/nologin<BR><STRONG>lynn:x:500:500::/home/lynn:/bin/bash<BR></STRONG>更改为：<BR><STRONG>lynn:x:500:500::/home/lynn:/sbin/nologin</STRONG><BR>该用户就无法登录了。</P>
<P><BR><STRONG 
style="BACKGROUND-COLOR: #ffff66; COLOR: black">3、禁止</STRONG><STRONG>所有</STRONG><STRONG 
style="BACKGROUND-COLOR: #99ff99; COLOR: black">用户登录</STRONG><STRONG>。</STRONG><BR><BR>touch 
/etc/nologin<BR>除root以外的用户不能登录了。</P><!--EndFragment--></DIV>
</TD>
</TR>
</TBODY>
</TABLE>
</DIV>
</DIV>
</BODY>
</HTML>