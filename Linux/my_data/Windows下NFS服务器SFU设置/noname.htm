<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="ProgId" content="OneNote.File">
<meta name="Generator" content="Microsoft OneNote 12">
<title>Windows下NFS服务器SFU设置</title>
</head>

<body lang="zh-CN">
<!--StartFragment-->

<p style='margin:0in'><span style='font-family:SimSun;font-size:10.0pt'><br>
</span><span style='font-family:微软雅黑;font-size:9.0pt;color:#998A62'>Windows下NFS服务器SFU设置</span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>一、安装SFU</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>1、下载软件SFU</p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'><a
href="http://www.microsoft.com/downloads/info.aspx?na=90&amp;p=&amp;SrcDisplayLang=en&amp;SrcCategoryId=&amp;SrcFamilyId=896c9688-601b-44f1-81a4-02878ff11778&amp;u=http%3a%2f%2fdownload.microsoft.com%2fdownload%2fa%2f1%2fc%2fa1ca7af1-a6e3-46e7-874a-4c5d8c0fb3b7%2fSFU35SEL_EN.exe">http://www.microsoft.com/downloads/info.aspx?na=90&amp;p=&amp;SrcDisplayLang=en&amp;SrcCategoryId=&amp;SrcFamilyId=896c9688-601b-44f1-81a4-02878ff11778&amp;u=http%3a%2f%2fdownload.microsoft.com%2fdownload%2fa%2f1%2fc%2fa1ca7af1-a6e3-46e7-874a-4c5d8c0fb3b7%2fSFU35SEL_EN.exe</a></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>2、编辑用户组group文件和密码passwd文件(或者复制目标linux下的group文件和passwd文件到windows下的C:\)
，并复制到C:\</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>例如：</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>passwd内容:</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>root:x:0:0:root:/root:/bin/bash</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>group内容:</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>root:x:0:root</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>3、运行SFU35BETA_EN.exe，这是一个自解压文件，指定一个目录，释放压缩的文件。
</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>4、在释放目录中，运行SfuSetup.msi，出现Micorsoft
Windows Services for UNIX Setup wizard窗口。 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>5、点击Next，出现Customer
Information窗口。 </p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>6、点击Next，出现License and Support Information窗口，选中“I accept the agreement”</span><span
style='font-family:SimSun'>。</span><span style='font-family:Arial'> </span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>7、点击Next，出现Installation
Options窗口。 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>8、选择Custom
Installation，点击Next，出现Selecting Components窗口。 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>9、点击Utilities目录项，选择Entire
feature will not be available，该项的图标变为一个棕色的叉号。 </p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>10、对“Interix GNU components”“Remote Connectivity”</span><span
style='font-family:SimSun'>使用相同的选择。</span><span style='font-family:Arial'> </span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>11、点击NFS目录项，选择Entire
Feature (including all subfeature if any) will be installed on local hard
drive，该项的图标变为一个白色背景的驱动器。 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>12、对“Authentication
tools for NFS”使用相同的选择, 选择Entire Feature (including all subfeature if any) will
be installed on local hard drive。 </p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>13、最终只有“Authentication tools for NFS”</span><span style='font-family:
SimSun'>和</span><span style='font-family:Arial'>“NFS”</span><span
style='font-family:SimSun'>两项是完全安装，其他各项都不安装。</span><span style='font-family:
Arial'> </span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>14、点击Next，出现User
Name Mapping窗口，选中Password and group files。 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>15、点击Next，在Password
file path and name下的空白栏中输入C:\passwd，在Group file path and name下的空白栏中输入C:\group。 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>16、点击Next，出现Installationg
Location窗口，选择安装位置。 这里的安装位置的盘必须是NTFS格式</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>17、点击Next，开始安装（约21MB）。最后选择Finish，结束安装。如提示重启，则重启。
(以上安装过程比较简单，引用网络上文章。)</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>注：如与卡巴斯基互联网套装6.0有冲突，需安装之前关闭卡巴斯基。
</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>二、共享Windows主机目录&nbsp;
&nbsp; </p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>1、&nbsp; &nbsp;</span><span style='font-family:SimSun'>不需重启，对</span><span
style='font-family:Arial'>NTFS</span><span style='font-family:SimSun'>格式盘中要共享的目录，右键点击出现下拉菜单，选择</span><span
style='font-family:Arial'>“属性”，出现目录属性窗口。</span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>2、&nbsp;
&nbsp;选择“NFS Sharing”选项卡，选中share this folder；指定共享名（Share
name，一个简单的名字，大小写无关，如dir）；字符编码（Encoding）选择GB2312-80；选中Allow anonymous
access；点击Permissions，出现NFS Share Permissions窗口，设置共享文件夹读写属性。</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>3、&nbsp;
&nbsp;在Type of access下拉菜单中选择Read-Write（可读可写）；要使目标板对本机文件有root权限，选中Allow root
access。</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>4、&nbsp;
&nbsp;设置完，点击OK按钮，回到目录属性窗口。</p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>5、&nbsp; &nbsp;</span><span style='font-family:SimSun'>点击</span><span
style='font-family:Arial'>“安全”选项，添加Everyone,</span><span style='font-family:
SimSun'>使之允许读取，控制，或者完全控制，如果没有</span><span style='font-family:Arial'>“安全”选项请在资源管理器点“工具”----&gt;“</span><span
style='font-family:SimSun'>文件夹选项</span><span style='font-family:Arial'>”，点击查看选项，将“使用简单文件共享（推荐）”前的勾去掉。目录属性窗口里就有安全选项了。</span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>6、请确认你已经开启了windows的文件共享功能，如果没有请开启。否则会出现NFS能挂载，但不能访问的问题。我在设置的时候就遇到了这样的问题,郁闷了半天,^_^</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>三、配置Services
for UNIX Administration</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>1、选择开始-&gt;程序-&gt;Windows
Services for Unix-&gt;Services for Unix Administration启动Services for UNIX
Administration，</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>2、出现设置窗口后，点击
左边子窗口User Name Mapping，再点击标签栏“Map”，然后点击 show User Maps</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>3、在windows
user name 和unix user name框中分别输入guest和root，然后点击add，则添加到mapped users中。</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>4、然后再点击
show group Maps, 在windows group name 和unix group
name框中分别输入guests和root然后点击add，则添加到mapped groups中。</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>至此设置完毕 </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>四、启动目标板，并在目标板上挂装Windows目录&nbsp;&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>将主机IP设为192.168.1.1,交叉线与目标板相连，启动目标板，主机启动tftp服务，运行mount命令来挂装NFS目录：</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>&nbsp;
&nbsp;&nbsp; &nbsp; mount Ct nfs Co nolock 192.168.1.1: share_name /mnt</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>share_name为共享的目录名。显示一下目录内容，应为Windows机器上的共享NFS目录内容。</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>这样，我们编译好的程序便可以放入共享目录中，然后在目标板上运行。</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>例如：windows主机192.168.1.7
NFS共享了一个work目录，ARM板IP为192.168.1.9</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>二者通过交叉线连接，ARM板操作如下：</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>[root@(none)
/]$</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>[root@(none)
/]$mount -t nfs -o nolock 192.168.1.7:work /mnt/nfs/</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>[root@(none)
/]$cd /mnt/nfs/</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>[root@(none)
nfs]$ls</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>gpsdata&nbsp;&nbsp;ll&nbsp;
&nbsp;&nbsp; &nbsp; test</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>[root@(none)
nfs]$./gpsdata </p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>handle</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>Reading
data from robot.</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>[root@(none)
nfs]$</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>以上成功挂载了windows共享的work目录，并运行了gpsdata程序</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>注：1、如出现网络不通的问题，则应检查本地连接是否有防火墙，如有，则去掉防火墙保护。</p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>&nbsp; &nbsp;&nbsp; &nbsp;</span><span style='font-family:SimSun'>否则</span><span
style='font-family:Arial'>,</span><span style='font-family:SimSun'>打开以下端口服务</span><span
style='font-family:Arial'>:</span></p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>&nbsp; &nbsp; NFS </span><span style='font-family:SimSun'>服务器服务</span></p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>&nbsp; &nbsp;&nbsp; &nbsp;</span><span style='font-family:SimSun'>要启用对网络文件系统</span><span
style='font-family:Arial'> (NFS) </span><span style='font-family:SimSun'>服务器服务</span><span
style='font-family:Arial'>, </span><span style='font-family:SimSun'>访问必须打开下列端口。</span><span
style='font-family:Arial'> </span></p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>&nbsp; &nbsp;&nbsp; &nbsp;</span><span style='font-family:SimSun'>注意</span><span
style='font-family:Arial'> </span><span style='font-family:SimSun'>这些端口提供对</span><span
style='font-family:Arial'> NFS </span><span style='font-family:SimSun'>服务器和其相关服务访问。</span><span
style='font-family:Arial'> </span><span style='font-family:SimSun'>根据要求</span><span
style='font-family:Arial'>, </span><span style='font-family:SimSun'>必须打开</span><span
style='font-family:Arial'> TCP </span><span style='font-family:SimSun'>端口、</span><span
style='font-family:Arial'> UDP 端口, 或 TCP 端口和 UDP 端口。 </span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>服务或功能</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>协议</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>端口</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>Portmapper</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>TCP, UDP</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>111</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>状态</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>TCP, UDP</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>1039</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>Nlockmgr</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>TCP, UDP</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>1047</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>Mountd</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>TCP, UDP</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>1048</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>NFS 服务器</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>TCP, UDP</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>2049</p>

<p style='margin:0in;font-size:9.0pt;color:#998A62'><span style='font-family:
Arial'>&nbsp; &nbsp; 2</span><span style='font-family:SimSun'>、如果目标板上没有</span><span
style='font-family:Arial'>portmap</span><span style='font-family:SimSun'>服务，请一定要在</span><span
style='font-family:Arial'>mount</span><span style='font-family:SimSun'>中加入参数</span><span
style='font-family:Arial'>-o nolock,否则会报错:input/output error</span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt'><span style='color:
#998A62'>本文来自ChinaUnix博客，如果查看原文请点：</span><a
href="http://blog.chinaunix.net/u/17660/showart_697400.html">http://blog.chinaunix.net/u/17660/showart_697400.html</a></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt'><span style='color:
#998A62'>&nbsp;</span><span style='font-weight:bold;text-decoration:underline;
color:fuchsia'>修改windows xp 共享的文章</span></p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>笔者的很多朋友都曾遇到过这样的问题：在安装了Windows
XP的计算机上，即使网络连接和共享设置正确（如IP地址属于同一子网，启用了TCP/IP上的NetBIOS，防火墙软件没有禁止文件共享需要的135、137、138、139等端口），使用其他系统（包括Windows
9X/Me/2000/XP等）的用户仍然无法访问该计算机。我们应该怎样解决这一问题呢? </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>默认情况下，Windows
XP的本地安全设置要求进行网络访问的用户全部采用来宾方式。同时，在Windows
XP安全策略的用户权利指派中又禁止Guest用户通过网络访问系统。这样两条相互矛盾的安全策略导致了网内其他用户无法通过网络访问使用Windows
XP的计算机。你可采用以下方法解决。 </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'><span
style='font-weight:bold'>方法一 解除对Guest账号的限制</span> </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>点击“开始→运行”，在“运行”对话框中输入“GPEDIT.MSC”，打开组策略编辑器，依次选择“计算机配置→Windows设置→安全设置→本地策略→用户权利指派”，双击“拒绝从网络访问这台计算机”策略（见图），删除里面的“GUEST”账号。这样其他用户就能够用Guest账号通过网络访问使用Windows
XP系统的计算机了。 </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'><span
style='font-weight:bold'>方法二 更改网络访问模式</span> </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>打开组策略编辑器，依次选择“计算机配置→Windows设置→安全设置→本地策略→安全选项”，双击“网络访问：本地账号的共享和安全模式”策略，将默认设置“仅来宾―本地用户以来宾身份验证”，更改为“经典：本地用户以自己的身份验证”。
</p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>现在，当其他用户通过网络访问使用Windows
XP的计算机时，就可以用自己的“身份”进行登录了（前提是Windows XP中已有这个账号并且口令是正确的）。 </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>当该策略改变后，文件的共享方式也有所变化，在启用“经典：本地用户以自己的身份验证”方式后，我们可以对同时访问共享文件的用户数量进行限制，并能针对不同用户设置不同的访问权限。
</p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:Arial;font-size:9.0pt;color:#998A62'>不过我们可能还会遇到另外一个问题，当用户的口令为空时，访问还是会被拒绝。原来在“安全选项”中有一个“账户：使用空白密码的本地账户只允许进行控制台登录”策略默认是启用的，根据Windows
XP安全策略中拒绝优先的原则，密码为空的用户通过网络访问使用Windows XP的计算机时便会被禁止。我们只要将这个策略停用即可解决问题。 </p>

<p style='margin:0in;font-family:SimSun;font-size:10.0pt'>&nbsp;</p>

<!--EndFragment-->
</body>

</html>