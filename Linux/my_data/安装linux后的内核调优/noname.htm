<!-- saved from url=http://blog.chinaunix.net/u/2710/showart_2016684.html -->
<script>
window.onerror = new Function("return(false);")
</script><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML><HEAD><TITLE>安装linux后的内核调优 - app - lovegqin</TITLE><LINK 
href="index.css" rel=stylesheet></LINK><LINK 
title="ChinaUnix Blog RSS Feed" 
href="rss.php_id=2710" type=application/rss+xml 
rel=alternate></LINK></HEAD>

<BODY style="BACKGROUND: #cccccc" leftMargin=0 topMargin=0 align="center" 
marginheight="0" marginwidth="0">

<CENTER>

<TABLE style="BORDER-COLLAPSE: collapse" cellSpacing=0 cellPadding=0 width=950 
bgColor=#ffffff border=0>

<TBODY>

<TR>

<TD vAlign=top width=685>

<TABLE style="BORDER-COLLAPSE: collapse" cellSpacing=0 cellPadding=0 
width="100%" align=center border=0>

<TBODY>

<TR>

<TD>

<TABLE style="BORDER-COLLAPSE: collapse" borderColor=#bbf0ff cellSpacing=1 
cellPadding=0 width="100%" border=1>

<TBODY>

<TR>

<TD align=middle>

<TABLE style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word" cellSpacing=0 
cellPadding=0 width=650 border=0>

<TBODY>

<TR>

<TD align=middle>

<TABLE style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word" cellSpacing=0 
cellPadding=0 width="100%" border=0>

<TBODY>

<TR>

<TD width=650>

<DIV id=art style="MARGIN: 15px"><!--StartFragment--><DIV class=tit>安装linux后的内核调优</DIV>
<DIV class=date><BR></DIV>kernel.shmall = 268435456<BR>net.ipv4.tcp_syncookies = 
1<BR>net.ipv4.tcp_tw_reuse = 1<BR>net.ipv4.tcp_tw_recycle = 
1<BR>net.ipv4.tcp_fin_timeout = 30<BR>net.ipv4.tcp_keepalive_time = 
1200<BR>net.ipv4.ip_local_port_range = 1024 65000<BR>net.ipv4.tcp_max_tw_buckets 
= 5000<BR>net.ipv4.tcp_max_tw_buckets = 5000<BR>net.ipv4.tcp_fin_timeout = 
30<BR>net.ipv4.tcp_keepalive_time = 300<BR>net.ipv4.tcp_syncookies = 
1<BR>net.ipv4.tcp_tw_reuse = 1<BR>net.ipv4.tcp_tw_recycle = 
1<BR>net.ipv4.ip_local_port_range = 5000 65000<BR>net.ipv4.tcp_mem = 786432 
1048576 1572864<BR>net.core.wmem_max = 873200<BR>net.core.rmem_max = 
873200<BR>net.ipv4.tcp_wmem = 8192 436600 873200<BR>net.ipv4.tcp_rmem = 32768 
436600 873200<BR>net.core.somaxconn = 256<BR>net.core.netdev_max_backlog = 
1000<BR>net.ipv4.tcp_max_syn_backlog = 2048<BR>net.ipv4.tcp_retries2 = 
5<BR>net.ipv4.tcp_keepalive_time = 500<BR>net.ipv4.tcp_keepalive_intvl = 
30<BR>net.ipv4.tcp_keepalive_probes = 3<BR>net.ipv4.conf.lo.arp_ignore = 
0<BR>net.ipv4.conf.lo.arp_announce = 0<BR>net.ipv4.conf.all.arp_ignore = 
0<BR>net.ipv4.conf.all.arp_announce = 0<BR><BR>几个解释：<BR>net.ipv4.tcp_syncookies 
= 1<BR>#表示开启SYN 
Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；<BR>net.ipv4.tcp_tw_reuse 
= 1<BR>#表示开启重用。允许将TIME-WAIT 
sockets重新用于新的TCP连接，默认为0，表示关闭；<BR>net.ipv4.tcp_tw_recycle = 
1<BR>#表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。<BR>net.ipv4.tcp_fin_timeout = 
30<BR>#表示如果套接字由本端要求关闭，这个参数决定了它保持在FIN-WAIT-2状态的时间。<BR>net.ipv4.tcp_keepalive_time 
= 1200 
<BR>#表示当keepalive起用的时候，TCP发送keepalive消息的频度。缺省是2小时，改为20分钟。<BR>net.ipv4.ip_local_port_range 
= 1024&nbsp;&nbsp;&nbsp; 65000 
<BR>#表示用于向外连接的端口范围。缺省情况下很小：32768到61000，改为1024到65000。<BR>net.ipv4.tcp_max_tw_buckets 
= 
5000<BR>#表示系统同时保持TIME_WAIT套接字的最大数量，如果超过这个数字，<BR>#TIME_WAIT套接字将立刻被清除并打印警告信息。默认为180000，改为5000。<BR>#对于Apache、Nginx等服务器，上几行的参数可以很好地减少TIME_WAIT套接字数量，<BR>#但是对于Squid，效果却不大。此项参数可以控制TIME_WAIT套接字的最大数量，避免Squid服务器被大量的TIME_WAIT套接字拖死。<BR><!--EndFragment--></DIV>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</CENTER>
</BODY>
</HTML>